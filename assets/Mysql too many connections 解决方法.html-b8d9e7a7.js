const t=JSON.parse(`{"key":"v-17a25eec","path":"/halo/Mysql%20too%20many%20connections%20%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95.html","title":"Mysql too many connections 解决方法","lang":"zh-CN","frontmatter":{"icon":"edit","date":"2022-10-13T00:00:00.000Z","category":["mysql"],"tag":["mysql"],"headerDepth":5,"description":"Mysql too many connections 解决方法 最近写javaee项目的时候，mysql报了too many connections的错误，百度的内容有一些有问题，所以我重新写一下我的解决方法。 mysql -u root -p 回车输入密码进入mysql show processlist; 查看连接数，可以发现有很多连接处于sleep状态，这些其实是暂时没有用的，所以可以kill掉 show variables like \\"max_connections\\"; 查看最大连接数，应该是与上面查询到的连接数相同，才会出现too many connections的情况 set GLOBAL max_connections=1000; 修改最大连接数，但是这不是一劳永逸的方法，应该要让它自动杀死那些sleep的进程。 show global variables like 'wait_timeout'; 这个数值指的是mysql在关闭一个非交互的连接之前要等待的秒数，默认是28800s set global wait_timeout=300; 修改这个数值，这里可以随意，最好控制在几分钟内 set global interactive_timeout=500; 修改这个数值，表示mysql在关闭一个连接之前要等待的秒数，至此可以让mysql自动关闭那些没用的连接，但要注意的是，正在使用的连接到了时间也会被关闭，因此这个时间值要合适 批量kill之前没用的sleep连接，在网上搜索的方法对我都不奏效，因此只好使用最笨的办法，一个一个kill select concat('KILL ',id,';') from information_schema.processlist where user='root'; 先把要kill的连接id都查询出来 复制中间的kill id;内容到word文档 替换掉符号“|”和回车符（在word中查询^p即可查询到回车符） 把修改过的内容复制回终端，最后按回车执行！","head":[["meta",{"property":"og:url","content":"https://github.wuanwanghao.top/halo/Mysql%20too%20many%20connections%20%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95.html"}],["meta",{"property":"og:site_name","content":"忘皓 博客"}],["meta",{"property":"og:title","content":"Mysql too many connections 解决方法"}],["meta",{"property":"og:description","content":"Mysql too many connections 解决方法 最近写javaee项目的时候，mysql报了too many connections的错误，百度的内容有一些有问题，所以我重新写一下我的解决方法。 mysql -u root -p 回车输入密码进入mysql show processlist; 查看连接数，可以发现有很多连接处于sleep状态，这些其实是暂时没有用的，所以可以kill掉 show variables like \\"max_connections\\"; 查看最大连接数，应该是与上面查询到的连接数相同，才会出现too many connections的情况 set GLOBAL max_connections=1000; 修改最大连接数，但是这不是一劳永逸的方法，应该要让它自动杀死那些sleep的进程。 show global variables like 'wait_timeout'; 这个数值指的是mysql在关闭一个非交互的连接之前要等待的秒数，默认是28800s set global wait_timeout=300; 修改这个数值，这里可以随意，最好控制在几分钟内 set global interactive_timeout=500; 修改这个数值，表示mysql在关闭一个连接之前要等待的秒数，至此可以让mysql自动关闭那些没用的连接，但要注意的是，正在使用的连接到了时间也会被关闭，因此这个时间值要合适 批量kill之前没用的sleep连接，在网上搜索的方法对我都不奏效，因此只好使用最笨的办法，一个一个kill select concat('KILL ',id,';') from information_schema.processlist where user='root'; 先把要kill的连接id都查询出来 复制中间的kill id;内容到word文档 替换掉符号“|”和回车符（在word中查询^p即可查询到回车符） 把修改过的内容复制回终端，最后按回车执行！"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-04-17T08:34:33.000Z"}],["meta",{"property":"article:tag","content":"mysql"}],["meta",{"property":"article:published_time","content":"2022-10-13T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-04-17T08:34:33.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Mysql too many connections 解决方法\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-10-13T00:00:00.000Z\\",\\"dateModified\\":\\"2023-04-17T08:34:33.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":1,"title":"Mysql too many connections 解决方法","slug":"mysql-too-many-connections-解决方法","link":"#mysql-too-many-connections-解决方法","children":[]}],"git":{"createdTime":1681716180000,"updatedTime":1681720473000,"contributors":[{"name":"forget-the-bright","email":"kshelloworldwh@gmail.com","commits":2}]},"readingTime":{"minutes":1.54,"words":462},"filePathRelative":"halo/Mysql too many connections 解决方法.md","localizedDate":"2022年10月13日","excerpt":"<h1> Mysql too many connections 解决方法</h1>\\n<p>最近写javaee项目的时候，mysql报了too many connections的错误，百度的内容有一些有问题，所以我重新写一下我的解决方法。</p>\\n<ol>\\n<li>\\n<p>mysql -u root -p 回车输入密码进入mysql<br>\\n<img src=\\"https://local.wuanwanghao.top:30549/upload/2022/10/image-6007218e54be45fd990f719385c892fd.png\\" alt=\\"image.png\\" loading=\\"lazy\\"></p>\\n</li>\\n<li>\\n<p>show processlist;\\n查看连接数，可以发现有很多连接处于sleep状态，这些其实是暂时没有用的，所以可以kill掉</p>\\n</li>\\n<li>\\n<p>show variables like \\"max_connections\\";\\n查看最大连接数，应该是与上面查询到的连接数相同，才会出现too many connections的情况</p>\\n</li>\\n<li>\\n<p>set GLOBAL max_connections=1000;\\n修改最大连接数，但是这不是一劳永逸的方法，应该要让它自动杀死那些sleep的进程。\\nshow global variables like 'wait_timeout';</p>\\n</li>\\n<li>\\n<p>这个数值指的是mysql在关闭一个非交互的连接之前要等待的秒数，默认是28800s\\nset global wait_timeout=300;</p>\\n</li>\\n<li>\\n<p>修改这个数值，这里可以随意，最好控制在几分钟内\\n<img src=\\"https://local.wuanwanghao.top:30549/upload/2022/10/image-08ad270052c547b09de075eb23063f2f.png\\" alt=\\"image.png\\" loading=\\"lazy\\"></p>\\n</li>\\n<li>\\n<p>set global interactive_timeout=500;\\n修改这个数值，表示mysql在关闭一个连接之前要等待的秒数，至此可以让mysql自动关闭那些没用的连接，但要注意的是，正在使用的连接到了时间也会被关闭，因此这个时间值要合适</p>\\n</li>\\n<li>\\n<p>批量kill之前没用的sleep连接，在网上搜索的方法对我都不奏效，因此只好使用最笨的办法，一个一个kill\\nselect concat('KILL ',id,';') from information_schema.processlist where user='root'; 先把要kill的连接id都查询出来\\n复制中间的kill id;内容到word文档\\n替换掉符号“|”和回车符（在word中查询^p即可查询到回车符）\\n把修改过的内容复制回终端，最后按回车执行！</p>\\n</li>\\n</ol>","copyright":{"author":"forget-the-bright"},"autoDesc":true}`);export{t as data};

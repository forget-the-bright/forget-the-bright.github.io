import{_ as a,W as e,X as n,a2 as s}from"./framework-3a0c4e99.js";const r={},i=s(`<h1 id="docker-部署-rocket-mq" tabindex="-1"><a class="header-anchor" href="#docker-部署-rocket-mq" aria-hidden="true">#</a> docker 部署 rocket-mq</h1><h1 id="docker-安装rocketmq" tabindex="-1"><a class="header-anchor" href="#docker-安装rocketmq" aria-hidden="true">#</a> docker 安装rocketmq</h1><h2 id="拉取镜像" tabindex="-1"><a class="header-anchor" href="#拉取镜像" aria-hidden="true">#</a> 拉取镜像</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> pull foxiswho/rocketmq:server-4.4.0 
<span class="token function">docker</span> pull foxiswho/rocketmq:broker-4.4.0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="创建数据挂载目录" tabindex="-1"><a class="header-anchor" href="#创建数据挂载目录" aria-hidden="true">#</a> 创建数据挂载目录</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /wanghao/rocketmq/server/logs
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /wanghao/rocketmq/server/store
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /wanghao/rocketmq/broker/logs
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /wanghao/rocketmq/broker/store
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /wanghao/rocketmq/broker/conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="编辑配置文件" tabindex="-1"><a class="header-anchor" href="#编辑配置文件" aria-hidden="true">#</a> 编辑配置文件</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">vi</span> /wanghao/rocketmq/broker/conf/broker.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="broker-conf" tabindex="-1"><a class="header-anchor" href="#broker-conf" aria-hidden="true">#</a> broker.conf</h3><div class="language-conf line-numbers-mode" data-ext="conf"><pre class="language-conf"><code>namesrvAddr=服务器ip:9876
brokerClusterName = DefaultCluster
brokerName = broker-a
brokerId = 0
deleteWhen = 04
fileReservedTime = 48
brokerRole = ASYNC_MASTER
flushDiskType = ASYNC_FLUSH
brokerIP1 = 服务器ip
listenPort=10911
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="创建容器" tabindex="-1"><a class="header-anchor" href="#创建容器" aria-hidden="true">#</a> 创建容器</h2><h3 id="server" tabindex="-1"><a class="header-anchor" href="#server" aria-hidden="true">#</a> server</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">9876</span>:9876 <span class="token punctuation">\\</span>
<span class="token parameter variable">--name</span> rocketmq-server <span class="token punctuation">\\</span> 
<span class="token parameter variable">-e</span> <span class="token string">&quot;JAVA_OPT_EXT=-server -Xms128m -Xmx128m -Xmn128m&quot;</span> <span class="token punctuation">\\</span> 
<span class="token parameter variable">-e</span> <span class="token string">&quot;JAVA_OPTS=-Duser.home=/opt&quot;</span> <span class="token punctuation">\\</span> 
<span class="token parameter variable">-v</span> /software/rocketmq/server/logs:/opt/logs <span class="token punctuation">\\</span> 
<span class="token parameter variable">-v</span> /software/rocketmq/server/store:/opt/store <span class="token punctuation">\\</span> 
foxiswho/rocketmq:server-4.4.0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="broker" tabindex="-1"><a class="header-anchor" href="#broker" aria-hidden="true">#</a> broker</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token parameter variable">-d</span> <span class="token punctuation">\\</span>  
<span class="token parameter variable">-p</span> <span class="token number">10909</span>:10909 <span class="token punctuation">\\</span> 
<span class="token parameter variable">-p</span> <span class="token number">10911</span>:10911 <span class="token punctuation">\\</span> 
<span class="token parameter variable">--name</span> rocketmq-broker <span class="token punctuation">\\</span> 
<span class="token parameter variable">-e</span> <span class="token string">&quot;JAVA_OPT_EXT=-server -Xms128m -Xmx128m -Xmn128m&quot;</span> <span class="token punctuation">\\</span> 
<span class="token parameter variable">-e</span> <span class="token string">&quot;JAVA_OPTS=-Duser.home=/opt&quot;</span> <span class="token punctuation">\\</span> 
<span class="token parameter variable">-v</span> /software/rocketmq/broker/conf/broker.conf:/etc/rocketmq/broker.conf <span class="token punctuation">\\</span> 
<span class="token parameter variable">-v</span> /software/rocketmq/broker/logs:/opt/logs <span class="token punctuation">\\</span> 
<span class="token parameter variable">-v</span> /software/rocketmq/broker/store:/opt/store <span class="token punctuation">\\</span> 
<span class="token parameter variable">--privileged</span><span class="token operator">=</span>true <span class="token punctuation">\\</span> 
foxiswho/rocketmq:broker-4.4.0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="部署rocketmq的管理工具" tabindex="-1"><a class="header-anchor" href="#部署rocketmq的管理工具" aria-hidden="true">#</a> 部署RocketMQ的管理工具</h2><p><code>RocketMQ提供了UI管理工具，名为rocketmq-console，我们选择docker安装</code></p><h3 id="拉取镜像-1" tabindex="-1"><a class="header-anchor" href="#拉取镜像-1" aria-hidden="true">#</a> 拉取镜像</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> pull styletang/rocketmq-console-ng:1.0.0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="启动容器" tabindex="-1"><a class="header-anchor" href="#启动容器" aria-hidden="true">#</a> 启动容器</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token punctuation">\\</span>  
<span class="token parameter variable">--name</span> rocketmq-admin <span class="token punctuation">\\</span> 
<span class="token parameter variable">-e</span> <span class="token string">&quot;JAVA_OPTS=-Drocketmq.namesrv.addr=10.10.5.124:9876; -Dcom.rocketmq.sendMessageWithVIPChannel=false&quot;</span> <span class="token punctuation">\\</span> 
<span class="token parameter variable">-p</span> <span class="token number">18080</span>:8080 <span class="token punctuation">\\</span> 
<span class="token parameter variable">-t</span> styletang/rocketmq-console-ng:1.0.0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://local.wuanwanghao.top:30549/upload/2021/11/image-883f047266bc4531af1eb96e1b588a8e.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>`,22),o=[i];function t(c,l){return e(),n("div",null,o)}const p=a(r,[["render",t],["__file","docker 部署 rocket-mq.html.vue"]]);export{p as default};

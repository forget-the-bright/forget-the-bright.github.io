import{_ as e,W as a,X as r,a2 as l}from"./framework-3a0c4e99.js";const p={},t=l('<h1 id="centos7-防火墙" tabindex="-1"><a class="header-anchor" href="#centos7-防火墙" aria-hidden="true">#</a> Centos7 防火墙</h1><h4 id="安装" tabindex="-1"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> 安装：</h4><p>yum install firewalld</p><h4 id="_1、firewalld的基本使用" tabindex="-1"><a class="header-anchor" href="#_1、firewalld的基本使用" aria-hidden="true">#</a> 1、firewalld的基本使用</h4><p>启动： systemctl start firewalld</p><p>查看状态： systemctl status firewalld</p><p>禁用，禁止开机启动： systemctl disable firewalld</p><p>停止运行： systemctl stop firewalld</p><h4 id="_2-配置firewalld-cmd" tabindex="-1"><a class="header-anchor" href="#_2-配置firewalld-cmd" aria-hidden="true">#</a> 2.配置firewalld-cmd</h4><p>查看版本： firewall-cmd --version</p><p>查看帮助： firewall-cmd --help</p><p>显示状态： firewall-cmd --state</p><p>查看所有打开的端口： firewall-cmd --zone=public --list-ports</p><p>更新防火墙规则： firewall-cmd --reload</p><p>更新防火墙规则，重启服务： firewall-cmd --completely-reload</p><p>查看已激活的Zone信息: firewall-cmd --get-active-zones</p><p>查看指定接口所属区域： firewall-cmd --get-zone-of-interface=eth0</p><p>拒绝所有包：firewall-cmd --panic-on</p><p>取消拒绝状态： firewall-cmd --panic-off</p><p>查看是否拒绝： firewall-cmd --query-panic</p><h4 id="_3-信任级别-通过zone的值指定" tabindex="-1"><a class="header-anchor" href="#_3-信任级别-通过zone的值指定" aria-hidden="true">#</a> 3.信任级别，通过Zone的值指定</h4><p>drop: 丢弃所有进入的包，而不给出任何响应</p><p>block: 拒绝所有外部发起的连接，允许内部发起的连接</p><p>public: 允许指定的进入连接</p><p>external: 同上，对伪装的进入连接，一般用于路由转发</p><p>dmz: 允许受限制的进入连接</p><p>work: 允许受信任的计算机被限制的进入连接，类似 workgroup</p><p>home: 同上，类似 homegroup</p><p>internal: 同上，范围针对所有互联网用户</p><p>trusted: 信任所有连接</p><h4 id="_4-firewall开启和关闭端口" tabindex="-1"><a class="header-anchor" href="#_4-firewall开启和关闭端口" aria-hidden="true">#</a> 4.firewall开启和关闭端口</h4><p>以下都是指在public的zone下的操作，不同的Zone只要改变Zone后面的值就可以</p><p>自媒体培训</p><p>添加： firewall-cmd --zone=public --add-port=80/tcp --permanent （--permanent永久生效，没有此参数重启后失效）</p><p>重新载入： firewall-cmd --reload</p><p>查看： firewall-cmd --zone=public --query-port=80/tcp</p><p>删除： firewall-cmd --zone=public --remove-port=80/tcp --permanent</p><h4 id="_5-管理服务" tabindex="-1"><a class="header-anchor" href="#_5-管理服务" aria-hidden="true">#</a> 5.管理服务</h4><p>以smtp服务为例， 添加到work zone</p><p>添加： firewall-cmd --zone=work --add-service=smtp</p><p>查看： firewall-cmd --zone=work --query-service=smtp</p><p>删除： firewall-cmd --zone=work --remove-service=smtp</p><h4 id="_6-配置-ip-地址伪装" tabindex="-1"><a class="header-anchor" href="#_6-配置-ip-地址伪装" aria-hidden="true">#</a> 6.配置 IP 地址伪装</h4><p>查看： firewall-cmd --zone=external --query-masquerade</p><p>打开： firewall-cmd --zone=external --add-masquerade</p><p>关闭： firewall-cmd --zone=external --remove-masquerade</p><h4 id="_7-端口转发" tabindex="-1"><a class="header-anchor" href="#_7-端口转发" aria-hidden="true">#</a> 7.端口转发</h4><p>打开端口转发，首先需要打开IP地址伪装 firewall-cmd --zone=external --add-masquerade</p><p>转发 tcp 22 端口至 3753： firewall-cmd --zone=external --add-forward-port=22:porto=tcp:toport=3753</p><p>转发端口数据至另一个IP的相同端口： firewall-cmd --zone=external --add-forward-port=22:porto=tcp:toaddr=192.168.1.112</p><p>转发端口数据至另一个IP的 3753 端口： firewall-cmd --zone=external --add-forward-port=22:porto=tcp:：toport=3753:toaddr=192.168.1.112</p><h4 id="_8-systemctl是centos7的服务管理工具中主要的工具-它融合之前service和chkconfig的功能于一体。" tabindex="-1"><a class="header-anchor" href="#_8-systemctl是centos7的服务管理工具中主要的工具-它融合之前service和chkconfig的功能于一体。" aria-hidden="true">#</a> 8.systemctl是CentOS7的服务管理工具中主要的工具，它融合之前service和chkconfig的功能于一体。</h4><p>启动一个服务：systemctl start firewalld.service</p><p>关闭一个服务：systemctl stop firewalld.service</p><p>重启一个服务：systemctl restart firewalld.service</p><p>显示一个服务的状态：systemctl status firewalld.service</p><p>在开机时启用一个服务：systemctl enable firewalld.service</p><p>在开机时禁用一个服务：systemctl disable firewalld.service</p><p>查看服务是否开机启动：systemctl is-enabled firewalld.service</p><p>查看已启动的服务列表：systemctl list-unit-files|grep enabled</p><p>查看启动失败的服务列表：systemctl --failed</p>',61),d=[t];function i(c,s){return a(),r("div",null,d)}const n=e(p,[["render",i],["__file","Centos7 防火墙.html.vue"]]);export{n as default};

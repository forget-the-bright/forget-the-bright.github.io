import{_ as t,W as i,X as l,Z as a,$ as n,a0 as e,a2 as c,C as r}from"./framework-3a0c4e99.js";const o={},p=a("h1",{id:"linux-gitea-搭建",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#linux-gitea-搭建","aria-hidden":"true"},"#"),n(" linux gitea 搭建")],-1),d={href:"https://docs.gitea.io/zh-cn/",target:"_blank",rel:"noopener noreferrer"},u=c(`<h3 id="下载可执行文件" tabindex="-1"><a class="header-anchor" href="#下载可执行文件" aria-hidden="true">#</a> 下载可执行文件</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /wanghao/gitea
<span class="token builtin class-name">cd</span>  /wanghao/gitea
<span class="token function">wget</span> <span class="token parameter variable">-O</span> gitea https://dl.gitea.com/gitea/1.19.0/gitea-1.19.0-linux-amd64
<span class="token function">chmod</span> +x gitea
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="验证文件-选作" tabindex="-1"><a class="header-anchor" href="#验证文件-选作" aria-hidden="true">#</a> 验证文件（选作）</h3><p>Gitea 对打包的二进制文件使用 GPG密钥 签名以防止篡改。 请根据对应文件名 .asc 中包含的校验码检验文件的一致性。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>gpg <span class="token parameter variable">--keyserver</span> keys.openpgp.org <span class="token parameter variable">--recv</span> 7C9E68152594688862D62AF62D9AE806EC1592E2
gpg <span class="token parameter variable">--verify</span> gitea-1.19.0-linux-amd64.asc gitea-1.19.0-linux-amd64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>校验正确时的信息为 Good signature from &quot;Teabot <a href="mailto:teabot@gitea.io">teabot@gitea.io</a>&quot;。 校验错误时的信息为 This key is not certified with a trusted signature!。</p><h3 id="添加环境变量" tabindex="-1"><a class="header-anchor" href="#添加环境变量" aria-hidden="true">#</a> 添加环境变量</h3><blockquote><p><code>GITEA_WORK_DIR</code>：工作目录的绝对路径 <code>GITEA_CUSTOM</code>：默认情况下 Gitea 使用默认目录 <code>GITEA_WORK_DIR/custom</code>，您可以使用这个参数来配置 custom 目录</p></blockquote><p>修改环境配置文件</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">vim</span> etc/profile
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>追加</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">GITEA_HOME</span><span class="token operator">=</span>/wanghao/gitea
<span class="token builtin class-name">export</span> <span class="token assign-left variable">GITEA_WORK_DIR</span><span class="token operator">=</span><span class="token variable">$GITEA_HOME</span>/workdir
<span class="token builtin class-name">export</span> <span class="token assign-left variable">GITEA_CUSTOM</span><span class="token operator">=</span><span class="token variable">$GITEA_WORK_DIR</span>/custom
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$GITEA_HOME</span><span class="token builtin class-name">:</span><span class="token environment constant">$PATH</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="添加systemd-服务" tabindex="-1"><a class="header-anchor" href="#添加systemd-服务" aria-hidden="true">#</a> 添加systemd 服务</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>sudo vim /etc/systemd/system/gitea.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>追加</p><div class="language-ini line-numbers-mode" data-ext="ini"><pre class="language-ini"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Unit</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">Description</span><span class="token punctuation">=</span><span class="token value attr-value">Gitea (Git with a cup of tea)</span>
<span class="token key attr-name">After</span><span class="token punctuation">=</span><span class="token value attr-value">syslog.target</span>
<span class="token key attr-name">After</span><span class="token punctuation">=</span><span class="token value attr-value">network.target</span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Service</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">RestartSec</span><span class="token punctuation">=</span><span class="token value attr-value">2s</span>
<span class="token key attr-name">Type</span><span class="token punctuation">=</span><span class="token value attr-value">simple</span>
<span class="token key attr-name">User</span><span class="token punctuation">=</span><span class="token value attr-value">wanghao</span>
<span class="token key attr-name">Group</span><span class="token punctuation">=</span><span class="token value attr-value">wanghao</span>
<span class="token key attr-name">WorkingDirectory</span><span class="token punctuation">=</span><span class="token value attr-value">/wanghao/gitea/workdir</span>
<span class="token key attr-name">ExecStart</span><span class="token punctuation">=</span><span class="token value attr-value">/wanghao/gitea/gitea web --config /wanghao/gitea/app.ini</span>
<span class="token key attr-name">Restart</span><span class="token punctuation">=</span><span class="token value attr-value">always</span>
<span class="token key attr-name">Environment</span><span class="token punctuation">=</span><span class="token value attr-value">USER=wanghao HOME=/home/wanghao GITEA_WORK_DIR=/wanghao/gitea/workdir</span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Install</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">WantedBy</span><span class="token punctuation">=</span><span class="token value attr-value">multi-user.target</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>启动</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>systemctl enable gitea
systemctl start gitea
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="开放端口" tabindex="-1"><a class="header-anchor" href="#开放端口" aria-hidden="true">#</a> 开放端口</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">3000</span>/tcp <span class="token parameter variable">--permanent</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="问题解决" tabindex="-1"><a class="header-anchor" href="#问题解决" aria-hidden="true">#</a> 问题解决</h3>`,21),v={href:"https://blog.csdn.net/qq_37726813/article/details/127475348",target:"_blank",rel:"noopener noreferrer"};function m(k,b){const s=r("ExternalLinkIcon");return i(),l("div",null,[p,a("p",null,[a("a",d,[n("官方文档"),e(s)])]),u,a("p",null,[n("ssh clone 时遇到"),a("a",v,[n("No supported authentication methods available (server sent: publickey) "),e(s)])])])}const g=t(o,[["render",m],["__file","linux gitea 搭建.html.vue"]]);export{g as default};
